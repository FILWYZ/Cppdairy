本节目标：  
**把 TCP 连接管理问题，训练成“面试中的第一反应答案”。**

---

## 题 1：一句话说明三次握手的核心目的

### 标准答案

> 确认双方的收发能力，并防止历史连接请求干扰当前连接。

---

## 题 2：为什么 TCP 不能只用两次握手？

### 详细答案

* 服务端无法确认客户端是否收到自己的 SYN
* 历史 SYN 可能被误认为新连接
* 会导致连接状态不一致和资源浪费

---

## 题 3：四次挥手解决的核心问题是什么？

### 标准答案

> TCP 是全双工连接，关闭必须在两个方向上分别完成。

---

## 题 4：TIME_WAIT 出现在哪一方？

### 标准答案

> 出现在 **主动关闭连接的一方**。

---

## 题 5：TIME_WAIT 的两个工程意义是什么？

### 详细答案

1. 防止旧连接中的延迟数据影响新连接
2. 确保被动关闭方能收到最后一个 ACK

---

## 题 6：CLOSE_WAIT 是否正常？

### 标准答案

> 不正常，它表示应用层没有及时关闭 socket，是代码问题。

---

## 题 7：线上出现大量 CLOSE_WAIT，你的第一判断是什么？

### 标准答案

> 程序存在 fd 未释放或异常路径未 close 的问题。

---

## 题 8：一句话区分 TIME_WAIT 和 CLOSE_WAIT

### 面试版答案

> TIME_WAIT 是协议层的设计结果，  
> CLOSE_WAIT 是应用层忘记善后的结果。
