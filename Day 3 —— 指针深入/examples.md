## ç¤ºä¾‹ 1ï¼šé”™è¯¯è¿”å›å±€éƒ¨å˜é‡åœ°å€ï¼ˆå¿…é¡»åšï¼‰

```cpp
int* bad() {
    int x = 10;
    return &x;   // âŒ è¿”å›æ ˆåœ°å€
}

int main() {
    int* p = bad();
    *p = 20;     // é«˜æ¦‚ç‡å´©æºƒ
}
```

### ç°è±¡

* æœ‰æ—¶ç›´æ¥å´©
* æœ‰æ—¶â€œçœ‹èµ·æ¥èƒ½è·‘â€ï¼ˆæœ€å±é™©ï¼‰

ğŸ‘‰ **è¿™å°±æ˜¯ UB çš„ææ€–ä¹‹å¤„**

---

## ç¤ºä¾‹ 2ï¼šdelete åç»§ç»­ä½¿ç”¨

```cpp
int* p = new int(10);
delete p;
cout << *p << endl; // âŒ æ‚¬ç©ºæŒ‡é’ˆ
```

---

## ç¤ºä¾‹ 3ï¼šäºŒçº§æŒ‡é’ˆä¿®æ”¹æŒ‡é’ˆ

```cpp
void create(int** p) {
    *p = new int(42);
}

int main() {
    int* p = nullptr;
    create(&p);
    cout << *p << endl;
    delete p;
}
```

---

## gdb å®éªŒï¼ˆå¿…é¡»å®Œæˆï¼‰

```bash
g++ -g bad.cpp
(gdb) run
(gdb) bt
(gdb) info locals
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š

* æ ˆå¸§å·²ç»é”€æ¯
* x ä¸å†å­˜åœ¨

---
